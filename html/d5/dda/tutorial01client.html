<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ObjGL: Tutorial - ObjGL Client</title>
<link href="../../objgl.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ObjGL64px.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ObjGL
   </div>
   <div id="projectbrief">Object Graphics Libary</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<script type="text/javascript">
//<![CDATA[
function getLabelName(innerHTML) {
    var str = innerHTML.toLowerCase();
    // Replace all '+' with 'p'
    str = str.split('+').join('p');
    // Replace all ' ' with '_'
    str = str.split(' ').join('_');
    // Replace all '#' with 'sharp'
    str = str.split('#').join('sharp');
    // Replace other special characters with 'ascii' + code
    for (var i = 0; i < str.length; i++) {
        var charCode = str.charCodeAt(i);
        if (!(charCode == 95 || (charCode > 96 && charCode < 123) || (charCode > 47 && charCode < 58)))
            str = str.substr(0, i) + 'ascii' + charCode + str.substr(i + 1);
    }
    return str;
}
function addToggle() {
    var $getDiv = $('div.newInnerHTML').last();
    var buttonName = $getDiv.html();
    var label = getLabelName(buttonName.trim());
    $getDiv.attr("title", label);
    $getDiv.hide();
    $getDiv = $getDiv.next();
    $getDiv.attr("class", "toggleable_div label_" + label);
    $getDiv.hide();
}
//]]>
</script>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial - ObjGL Client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a simple ObjGL client application tutorial!</p>
<p>This connects to a broadcasting host, receives broadcast messages and parses cache and render instructions by linking to the ObjGL::Render library and then renders onto a 2D viewport as defined by the client application. Please refer the <b> Tutorial01Client </b> project in the SDK as you follow this tutorial.</p>
<hr/>
<p>Each client application has two main components <code> <a class="el" href="../../d4/dec/class_obj_g_l_1_1_com_man.html" title="This class contains the modules that manages the subscriber and requestor operations from the display...">ObjGL::ComMan</a> </code> and <code><a class="el" href="../../da/de8/class_obj_g_l_1_1_d_s_r.html">ObjGL::DSR</a></code>. We begin with initializing a ComMan(Command Manager) object and a DSR(Display Side Renderer) object.</p>
<div class="fragment"><div class="line">ComMan              *pComMan(0);                      </div><div class="line">DSR                 *pRenderer(0);                    </div></div><!-- fragment --><div class="fragment"><div class="line">pComMan          = <span class="keyword">new</span> ComMan();</div><div class="line">pRenderer        = <span class="keyword">new</span> ViewClient();</div></div><!-- fragment --><p>These two objects work in parallel, with ComMan managing the communication with the host and DSR managing the parsing of the received messages and subsequent rendering.</p>
<hr/>
<h2>Configuration and Initialization</h2>
<p>Every client application takes a .json configuration file as a command line argument, which defines the host server properties to connect to and the rendering properties pertinent to the client. <br />
 </p><h3>A Sample Client Configuration JSON File</h3>
<p>For example, this config file for this tutorial is <b> RenderView.json </b> </p><div class="fragment"><div class="line">{</div><div class="line">  &quot;ComMan&quot;: {</div><div class="line">    &quot;Publisher&quot;: {</div><div class="line">      &quot;Address&quot;: &quot;127.0.0.1&quot;,</div><div class="line">      &quot;Port&quot;: &quot;5557&quot;</div><div class="line">    },</div><div class="line">    &quot;Responder&quot;: {</div><div class="line">      &quot;Address&quot;: &quot;127.0.0.1&quot;,</div><div class="line">      &quot;Port&quot;: &quot;5558&quot;</div><div class="line">    }</div><div class="line">  },</div><div class="line">  &quot;RenCon&quot;: {</div><div class="line">    &quot;Renderer&quot; : &quot;View&quot;,</div><div class="line">    &quot;WindowDim&quot;: [ 1024, 1024 ]</div><div class="line">  },</div><div class="line">  &quot;OpenGL&quot;: {</div><div class="line">    &quot;Version&quot;:&quot;4.6&quot;,</div><div class="line">    &quot;Pipeline&quot;: &quot;shader&quot;,</div><div class="line">    &quot;Library&quot;: &quot;GLFW&quot;</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p>The properties under <b> ComMan </b> Publisher sets the host address and port for broadcast messages. The Responder sets the properties for cache request messages sent by the client to the host. The properties under <b> RenCon </b> sets the type of renderer and window properties. In this case, the Renderer 'View' denotes a simple 2D client.</p>
<p>Once the .json file is parsed, the ComMan configures the Publisher and Responder with corresponding IP address and port details. The choice of factory can also be parsed from the configuration file, and the appropriate factory is initialized.</p>
<p>The Display Side Renderer object is initialized, which in turn sets up a list of function pointers that correspond to the type of incoming message.</p>
<div class="fragment"><div class="line">pRenderer-&gt;init();</div></div><!-- fragment --><hr/>
<h2>Rendering</h2>
<p>Before the render loop begins, the ComMan is set in motion in a different thread.</p>
<div class="fragment"><div class="line">pComMan-&gt;start();</div></div><!-- fragment --><p>Inside the render loop, three message list pointers are initialized, each for cache messages, render messages from the host machine and cache update request messages sent from the display to the host machine.</p>
<div class="fragment"><div class="line">MsgLstPtr     spMsgCacheLst(0);</div><div class="line">MsgLstPtr     spMsgRenderLst(0);</div><div class="line">MsgLstPtr     spMsgSendLst(0);</div></div><!-- fragment --><p>The ComMan object calls the <code> recvMsgLst() </code> method to receive the incoming cache and render messages. This populates the lists with corresponding cache and render messages.</p>
<div class="fragment"><div class="line">pComMan-&gt;recvMsgLst(spMsgCacheLst,spMsgRenderLst);</div></div><!-- fragment --><p>As soon as the messages are received, they are parsed and corresponding action is followed through by calling the function pointers that are assigned initially. The call to <code> processMsgs() </code> decodes the type of message and calls the appropriate function through the function pointer.</p>
<p>The client renderer is supposed to derive from DSR and override <code> prerender() </code> and <code> render() </code> functions. <br />
 </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (spMsgCacheLst)</div><div class="line">  pRenderer-&gt;processMsgs(spMsgCacheLst, spReqSendLst);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (spMsgRenderLst)</div><div class="line">{</div><div class="line">  pRenderer-&gt;processMsgs(spMsgRenderLst, spReqSendLst);</div><div class="line">  pRenderer-&gt;preRender();</div><div class="line">  pRenderer-&gt;render();</div><div class="line">  pRenderer-&gt;postRender();</div><div class="line">}</div></div><!-- fragment --><p>When a render message is processed by <code> processMsgs() </code> and found to point to a cache handle which is not available in the cache map, the <code> spReqSendLst </code> is populated and an update request message is sent to the host.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (spMsgSendLst &amp;&amp; !spMsgSendLst-&gt;empty())</div><div class="line">  pComMan-&gt;sendMsgLst(spMsgSendLst);</div></div><!-- fragment --><hr/>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
